---
import ThemeSun from './icons/ThemeSun.svg';
import ThemeMoon from './icons/ThemeMoon.svg';
---

<button class="theme-toggle" type="button" aria-label="Toggle theme" aria-pressed="false">
    <ThemeSun />
    <ThemeMoon />
</button>

<style>
    button.theme-toggle {
        color: var(--text-alt); /* updated from --text-secondary */
        display: inline-flex;
        position: relative;
        align-items: center;
        justify-content: center;
        width: calc(var(--space-3) + var(--2px) * 2);
        height: calc(var(--space-3) + var(--2px) * 2);
        transition: color var(--cubic-smooth);
    }

    button.theme-toggle:hover {
        color: var(--peach-accent); /* updated from --accent-peach */
    }

    .sun,
    .moon {
        position: absolute;
        transform-origin: center;
        transition: none;
    }

    @media (prefers-reduced-motion: no-preference) {
        html[data-ready='true'] .sun,
        html[data-ready='true'] .moon {
            transition:
                opacity 0.2s ease,
                transform 0.3s cubic-bezier(0.8, -0.5, 0.2, 1.4);
        }
    }

    /* Light mode */
    .sun {
        opacity: 1;
        transform: rotate(0deg) scale(1);
    }

    .moon {
        opacity: 0;
        transform: rotate(-180deg) scale(0.5);
    }

    /* Dark mode */
    :global([data-theme='dark']) .sun {
        opacity: 0;
        transform: rotate(180deg) scale(0.5);
    }

    :global([data-theme='dark']) .moon {
        opacity: 1;
        transform: rotate(0deg) scale(1);
    }

    :global(html.no-transition *:not(button.theme-toggle svg)) {
        transition: none !important;
    }
</style>

<script src="/scripts/theme-toggle.js" is:inline></script>
